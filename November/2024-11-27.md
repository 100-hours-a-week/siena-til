## 📅 날짜: 2024-11-27


### 💬 학습 목표
- 학습 목표 1 : 딥다이브 - 리눅스
  - 세부 학습 목표: 리눅스의 퍼미션 개념을 이해하고 사용법 익히기


### 🤿 리눅스 딥다이브
#### | 리눅스 퍼미션에 대해서 조사 후 발표 및 설정하는 방법에 대해서 시연

0. 퍼미션이란?

    - 퍼미션(Permission)이란, <br/>
    특정 파일이나 디렉토리에 대하여 읽기, 쓰기, 실행하기 등의 권한을 설정하는 것
    - 다중 사용자 운영체제에서 파일 접근과 보호 등을 위해 반드시 필요하다.

    - 퍼미션의 종류

    | **퍼미션** | **의미** | **파일** | **디렉터리** |
    | --- | --- | --- | --- |
    | r | 읽기(read) 권한 | 파일 읽기 | 디렉터리의 내용 읽기 |
    | w | 쓰기(write) 권한 | 파일 저장, 삭제  | 디렉터리에 파일을 저장, 디렉터리의 이름 변경, 삭제 |
    | x | 실행(execution) 권한 | 파일 실행 | 디렉터리에 접근 가능 |
    | s | SetUID, SetGID 권한 | 파일의 소유자권한으로 파일을 실행, 그룹 소유자의 권한으로 파일 실행 | 그룹 디렉토리 상속 |
    | t | Sticky Bit 권한 |  | 공유 디렉터리로 사용됨 |

    - 특수 권한

    1. **SetUID** (set User ID)
    
    - SetUID가 설정된 파일을 실행할 때, 일시적으로 **파일 소유자의 권한을 얻어 실행**할 수 있게 된다.
    - 소유자 권한 부분의 실행(`x`) 자리에 `s` 로 표시된다.
    - 적용
        - 8진수 이용
            ```
            chmod 4000 file_name
            ```
        - 문자 이용
            ```
            chmod u+s file_name
            ```
    - 예시
        - 주로 특정 시스템 명령이 일반 사용자에게 허용되어야 할 때 사용된다.
        - 예를 들어 비밀번호 변경 명령어(`passwd`)와 같이 일반 사용자가 `root` 권한으로 실행해야하는 경우

    2. **SetGID** (Set Group ID)
    
    - SetGID가 설정된 파일을 실행할 때, 일시적으로 **파일 소유 그룹의 권한을 얻어 실행**된다.
    - SetGID를 디렉토리에 설정할 경우 해당 디렉토리 내 파일이 동일한 그룹에 소속되도록 설정한다.  
    - 그룹 소유자 권한 부분의 실행(`x`) 자리에 `s` 로 표시된다.
    - 적용
        - 8진수를 이용
            ```
            chmod 2000 file_name
            ```
        - 문자를 이용
            ```
            chmod g+s file_name
            ```
    - 예시
        디렉토리에서 모든 새 파일이 해당 디렉토리의 그룹을 자동으로 상속받게 하고 팀 프로젝트 디렉토리에서 모든 파일을 같은 그룹으로 유지하고 싶을 때 사용된다.

        ⇒ `developers` 그룹이 SetGID가 설정된 `test` 디렉토리를 소유하고 있을 때 `test` 디렉토리의 모든 새 파일은  `developers` 그룹을 자동으로 상속 받는다.

    3. **Sticky Bit**
    
    - Sticky Bit 가 설정된 디렉토리에 파일을 생성하면, 해당 파일은 **생성한 사람의 소유**가 된다. 
    - 소유자와 root만이 해당 파일에 대한 삭제 및 수정에 대한 권한을 가질 수 있다.

    - 적용
        - 8진수 이용
            ```
            chmod 1000 file_name
            ```
        - 문자 이용
            ```
            chmod o+t file_name
            ```
    - 예시
        공유 디렉토리에서 다른 사용자가 내 파일을 삭제하지 못하도록 할 때 사용한다. `/tmp` 디렉토리에 기본적으로 설정되어 있다.

        ⇒ `/tmp` 디렉토리는 모든 사용자가 파일을 생성할 수 있지만 자신의 파일만 삭제할 수 있다.

    
    - 퍼미션의 표기
    ```
    -rw-r--r-- 1 ubuntu ubuntu 3771 Mar 31 2024 .bashrc
    ```
    10자리의 비트를 뒤에서 3자리씩 끊어서 맨 앞부터 A, B, C, D
    | A | B | C | D |
    | --- | --- | --- | --- |
    | 파일유형 | 소유자 권한 | 그룹 소유자 권한 | 일반 사용자 권한 |
    |  | 파일을 만든 사람이 가지는 권한 | 파일을 소유한 특정 그룹에 속한 사용자들이 가지는 권한 | 소유자도 아니고, 그룹에 속하지 않은 모든 사용자들이 가지는 권한 |
    | `-`  | `rw-` | `r--` | `r--` |

    | 표기 | 8진수 | 의미 |
    | --- | --- | --- |
    | `---` | 0 | 아무런 권한이 없음 |
    | `--x` | 1 | 실행 권한만 있음 |
    | `-w-` | 2 | 쓰기 권한만 있음 |
    | `-wz` | 3 | 쓰기와 실행권한만 있음 |
    | `r--` | 4 | 읽기 권한만 있음 |
    | `r-x` | 5 | 읽기와 실행권한만 있음 |
    | `rw-` | 6 | 읽기와 쓰기 권한만 있음 |
    | `rwx` | 7 | 모든 권한(읽기, 쓰기, 실행) 있음 |

    ⇒ `.bashrc` 파일의 소유자는 읽기와 쓰기가 가능하고 그룹 소유자와 일반 사용자는 읽기만 가능하다.

1. 퍼미션 설정 방법
    **chmod**
    권한을 설정하는 명령어

    1. **character 를 이용**
        
        - 퍼미션을 명시하는 r,w,x 세 개의 문자를 해당하는 권한 부분에 더하거나 빼주는 방식
        ```bash
        chmod g+w file_name
        ```
        file_name 파일의 그룹 소유자 권한에 w 권한을 더한다.
        
        ```bash
        chmod u+x, g+rw, o-rwx file_name
        ```
        file_name 파일의 소유자 권한에 실행권한을 더하고 그룹 소유자 권한에 읽기와 쓰기를 더하고 일반 사용자에게 모든 권한을 제거한다.
        
    2. **8진수를 이용**
        
        각각의 권한은 그에 해당하는 숫자를 가짐
        
        r=4, w=2, x=1 
        
        또한 권한은 총 3개의 부분으로 구성되어 있기 때문에 한 개의 파일 권한은 총 3개의 숫자로 표현됨
        
        ```
        chmod 644 file_name
        ```
        `rw-` `r--` `r--` 와 같은 뜻
        
        ```
        chmod 600 file_name
        ```
        `rw-------` 와 같은 뜻


2. 시연
    1. character 사용
    2. 8진수 사용
    3. SetUID 특수권한 사용
    4. Sticky bit 특수권한 사용

3. 질문 사항
    ❓ 특수 권한을 중복해서 쓸 수 있나요?
    ❗️ 네!
    <img width="937" alt="스크린샷 2024-11-28 오전 10 49 36" src="https://github.com/user-attachments/assets/65928ffa-f240-43d6-b0fc-de3eefbdb850">
    
    + SetUID는 파일에 설정됐을 때만 유의미해서 디렉토리에는 아무런 영향을 미치지않는다고 합니다.
    즉, `shared` 디렉토리에 생성되는 파일은 파일을 생성한 사용자의 그룹과 관계없이 해당 디렉토리 소유 그룹으로 설정되고 각 파일은 생성한 사용자만 삭제할 수 있게됩니다.

    예를 들어
    `shared` 디렉토리를 `user1`이 소유하고 있고 `developers` 그룹이 설정되어 있을 때 SetGID와 Sticky Bit가 활성화된 상태라고 하면,
    이후에 `shared` 디렉토리에 생성되는 모든 파일/디렉토리는 `developers` 그룹 소유로 설정됩니다. 사용자는 개인 그룹 대신 `developers` 그룹에 맞춰 작업합니다. `user1`이 생성한 파일은 `user1`과 관리자(`root`)만 삭제할 수 있습니다.

### 팀원들 주제

1. Redis
    
    - Remote Dictionary Server
    - `key : value` 데이터 구조에 기반한 비정형 데이터를 저장, 관리
    - 오픈소스 기반의 비관계형(NoSQL) 데이터베이스 관리 시스템 (DBMS)

    - 특징
        - 레디스는 인메모리에 모든 데이터를 저장한다
            => 데이터 처리 성능이 굉장히 빠름
        - Race Condition이 거의 발생하지않는 Single Thread
        - 다양한 자료구조 제공
        - 영속화 기능 제공

    - Redis는 데이터베이스에 접근하지않고 리소스에 접근할 수 있도록 해준다.
    (데이터 베이스에 접근하기 전에 먼저 레디스를 탐색)
    - 사용 목적, 사용하는 사람에 따라 활용이 다양하다.. (ex 방문자 수 조회)

2. 무중단 배포와 배포 전략

    - 애플리케이션 업데이트나 변경작업이 진행되는 동안에도 서비스를 완벽하게 이용가능하도록 하는 배포전략
    - 전자상거래 플랫폼, 금융 서비스, 클라우드 기반 애플리케이션 등 시스템이 지속적으로 운영되어야하는 비즈니스에서 매우 중요하다.

    - 무중단 배포 필수 개념
        - 트래픽 라우팅 및 로드 밸런싱
            사용자 요청을 배포된 여러 서버로 균등 분배 => 안정성과 성능 유지
        - 헬스체크의 중요성
            새로 배포된 서버가 정상적으로 동작하는지 지속적으로 확인
        
    1. 롤링배포
        기존 서버를 하나씩 새 버전으로 교체하는 방식
        
    2. 블루-그린 배포
        운영중인 서비스(blue)와 새롭게 배포할 환경(green)을 나누어 배포하는 방식

    3. 카나리 배포
        새로운 버전에 대한 오류를 조기에 감지하기 위해 트래픽을 점직적으로 분배하여 배포와 동시에 테스트하는 방식

    => 자신이 사용하는 환경과 요구사항에 적합한지를 고려하여 배포전략을 선택해야한다. **블루-그린배포**는 **빠른 롤백과 무중단 배포가 필요한 경우에 적합**하지만, 두 개의 운영 환경이 필수적이므로 충분한 여유공간이 필요하다. (**비용↑**), **롤링과 카나리 배포**의 경우 점진적인 배포로 **사용자 피드백에 따라 유연한 처리가 가능**하지만, 이에따라 전체적인 **배포시간은 오래 걸리는 편**이다. 

### 🔥 도전 과제 달성 확인, 내일의 도전과제 설정
- (지난) 도전 과제 1: 커뮤니티 코드 정리, 사진 업로드 API 추가하기 (명세서부터) 🔺
- (지난) 도전 과제 1: TC 작성하고 QA 진행 ❌

- (내일) 도전 과제 1: 지난 도전 과제 이어서 😓


<br/>

### 💭 오늘의 회고 (총 공부시간 9:15:39)
- 성공적인 점: 리눅스 퍼미션 설정을 딥다이브 준비하고 시연하는 과정에서 연습할 수 있었다.
- 개선해야할 점: 공부량 차근차근 늘리기. 이번주는 60시간 목표!

<br/>

### 📁 참고 자료 및 링크
- 딥다이브 페이지 참고