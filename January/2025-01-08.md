## ğŸ“… ë‚ ì§œ: 2025-01-08


### ğŸ’¬ í•™ìŠµ ëª©í‘œ

- í•™ìŠµ ëª©í‘œ 1 : ì»¤ë®¤ë‹ˆí‹° DB ì—°ê²° ì´ì–´ì„œ
- í•™ìŠµ ëª©í‘œ 2 : 2ì£¼ì°¨ ê³¼ì œ ë°˜ë ¤ì‚¬í•­ ê³µë¶€í•˜ê¸° (CORS, HTTP ë³´ì•ˆí—¤ë”)
- í•™ìŠµ ëª©í‘œ 3 : ë‹¨ì²´ QA (ì‚°ë„, ëŒ€ë‹ˆ, ì—ë”” ì»¤ë®¤ë‹ˆí‹°) ì°¸ì—¬í•˜ê¸°

### ğŸ“’ ì˜¤ëŠ˜ ê³µë¶€í•œ ë‚´ìš©
#### | ì»¤ë®¤ë‹ˆí‹° DB ì´ì–´ì„œ

1. ëŒ“ê¸€ ê´€ë ¨ ì˜¤ë¥˜

    - commentIdì— ìë™ ì¦ê°€(AI) ì†ì„±ì—†ìŒ
    
    ì˜¤ë¥˜ë©”ì‹œì§€
    ```
    Error: Field 'commentId' doesn't have a default value
    at PromisePool.query (/Users/goorm/Desktop/workspace/2-siena-eom-community-be/node_modules/mysql2/lib/promise/pool.js:36:22)
    at Object.saveComment (file:///Users/goorm/Desktop/workspace/2-siena-eom-community-be/models/postModelusingDB.js:68:24)
    at commentWrite (file:///Users/goorm/Desktop/workspace/2-siena-eom-community-be/controllers/postController.js:214:43)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5) {
    code: 'ER_NO_DEFAULT_FOR_FIELD',
    errno: 1364,
    sql: "INSERT INTO comment (postId, commentAuthor, content, contentDate) VALUES (4, 1, '<script>alert(\\'XSS ê³µê²©!\\')</script>', NULL)",
    sqlState: 'HY000',
    sqlMessage: "Field 'commentId' doesn't have a default value"
    }
    ```

    AI ì†ì„± ì¶”ê°€í•´ì£¼ê¸°
    ```sql
    ALTER TABLE comment MODIFY commentId INT AUTO_INCREMENT;
    ```

    - commentDate ë¥¼ contentDate ë¼ê³  ì‘ì„±í•´ë†“ìŒ (ì™œê·¸ë¬ì„ê¹Œ....)

    ì»¬ëŸ¼ëª… ìˆ˜ì •
    ```sql
    ALTER TABLE comment CHANGE COLUMN contentDate commentDate DATETIME;
    ```

    ERDì— ì´ë ‡ê²Œ ì˜¤ë¥˜ê°€ ë§ë‹¤ë‹ˆ ì§„ì§œ ERD ë§Œë“¤ ë•Œ ì¡¸ì•˜ë‚˜ë³´ë‹¤..
    ì²˜ìŒí•´ë³´ëŠ”ê±°ë¼ê³  ê½¤ ì—´ì‹¬íˆ ê³µë¶€í•´ê°€ë©´ì„œ í•œê±´ë° ì´ë ‡ê²Œ ì˜¤íƒ€ ë°œê²¬í•  ë•Œë§ˆë‹¤ ì–´ì´ì—†ì–´ì„œ ì›ƒìŒë‚˜ì˜´...í—ˆí—ˆ.......ì•„ë‹ˆì‚¬ì‹¤ ì•ˆì›ƒê²¨..

2. ê²Œì‹œê¸€ ë° ëŒ“ê¸€ ì‹œê°„ ì´ìŠˆ

    - í”„ë¡ íŠ¸ì—”ë“œì— ë‚˜íƒ€ë‚˜ëŠ” ì‹œê°„ í˜•ì‹ì´ ë‚´ê°€ ì›í•˜ëŠ” í˜•ì‹(yyyy-mm-dd hh:mm:ss)ì´ ì•„ë‹˜

        <img width="254" alt="%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202025-01-08%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%204 22 59" src="https://github.com/user-attachments/assets/dfb5da1b-1782-4d5c-8bbc-c522cf73418f" />

    - ë¬¸ì œ ë¶„ì„

        <img width="150" alt="%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202025-01-08%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%204 21 14" src="https://github.com/user-attachments/assets/5c25e147-4124-4645-a09b-2858075acbf2" />
        <img width="150" alt="%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202025-01-08%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%204 21 08" src="https://github.com/user-attachments/assets/04364cbc-ea44-4dcc-9d56-6f72f32a769e" />

        DBì—ëŠ” ì›í•˜ëŠ” í˜•ì‹ìœ¼ë¡œ ì €ì¥ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆìŒ (formatDate()í•¨ìˆ˜ë¡œ ìƒì„±)

    - ë¬¸ì œ ì›ì¸

        DATETIME íƒ€ì…ìœ¼ë¡œ ì €ì¥ëœ ê°’ì´ node.jsì—ì„œ JavaScript ê°ì²´ë¡œ ë³€í™˜ë  ë•Œ UTC ì‹œê°„ëŒ€ê°€ ì ìš©ë˜ê¸° ë•Œë¬¸
    
    - í•´ê²° ë°©ì•ˆ

        â‘  ë‚ ì§œ ë° ì‹œê°„ ë°ì´í„°ë¥¼ DATETIME íƒ€ì…ì´ ì•„ë‹Œ VARCHAR ë¡œ ì €ì¥í•˜ê¸°
        â‘¡ ë°±ì—”ë“œ ë°ì´í„°ë¥¼ í´ë¼ì´ì–¸íŠ¸ë¡œ ì „ë‹¬í•˜ê¸°ì „ì— í˜•ì‹ì„ ë³€í™˜í•´ì¤Œ

        ì²˜ìŒì— â‘ ë²ˆ ë°©ë²•ìœ¼ë¡œ ìˆ˜ì •í•˜ë ¤ê³  í–ˆëŠ”ë° ë‚ ì§œì—°ì‚°(ë‚ ì§œìˆœ ë°ì´í„° ì •ë ¬, ë¹„êµ)ì„ ëª»í•˜ê²Œ ëœë‹¤ê³  í•˜ì—¬ â‘¡ë²ˆìœ¼ë¡œ í•˜ê¸°ë¡œ í–ˆë‹¤..

    - ì½”ë“œ ìˆ˜ì •

    `formatDate()` í•¨ìˆ˜ë¥¼ ìˆ˜ì •í•´ì„œ ì›ë˜ ë§¤ê°œë³€ìˆ˜ì—†ì´ 
    `const postDate = formatDate();` ì´ë ‡ê²Œë§Œ ì‚¬ìš©í•˜ë˜ ì½”ë“œì˜€ëŠ”ë°
    ì•„ë˜ì²˜ëŸ¼ ìˆ˜ì •í•´ì„œ DBì—ì„œ ë¶ˆëŸ¬ì˜¤ëŠ” utcí˜•ì‹ì˜ ë°ì´í„°ë¥¼ í¬ë§·íŒ…í•˜ëŠ” ë°ì— ì‚¬ìš©í•¨

    ```jsx
    const formatDate = (date = new Date() ) => {
    const formatter = new Intl.DateTimeFormat('ko-KR', {
        timeZone: 'Asia/Seoul',
        year: 'numeric',
        month: '2-digit',
        day: '2-digit',
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit',
    });

    const parts = formatter.formatToParts(new Date(date));
    const yyyy = parts.find(part => part.type === 'year').value;
    const mm = parts.find(part => part.type === 'month').value;
    const dd = parts.find(part => part.type === 'day').value;
    const hh = parts.find(part => part.type === 'hour').value;
    const min = parts.find(part => part.type === 'minute').value;
    const ss = parts.find(part => part.type === 'second').value;

    return `${yyyy}-${mm}-${dd} ${hh}:${min}:${ss}`;
    };
    ```

    ```jsx
    // postDate í¬ë§·íŒ…
    if (post.postDate) {
        const utcDate = new Date(post.postDate);
         post.postDate = formatDate(utcDate);
    }
    ```

### ğŸ‘©â€ğŸ’» 2ì£¼ì°¨ ê³¼ì œ ë°˜ë ¤ì‚¬í•­ ê³µë¶€í•˜ê¸°

[CORSì˜ Preflight Request, Simple Request ì ˆì°¨ì— ëŒ€í•´ ê³µë¶€í•˜ê¸°](https://www.notion.so/adapterz/CORS-7586b6f36bd7403e89cca6bdd9ea8c6f?pvs=4)

[HTTP ë³´ì•ˆí—¤ë” ê²€í† í•˜ê¸°](https://www.notion.so/adapterz/HTTP-7a044aa456ad4037a299dd2312ca1bab?pvs=4)


### ğŸ”¥ ë„ì „ ê³¼ì œ ë‹¬ì„± í™•ì¸, ë‚´ì¼ì˜ ë„ì „ê³¼ì œ ì„¤ì •
- (ì§€ë‚œ) ë„ì „ ê³¼ì œ 1: ì»¤ë®¤ë‹ˆí‹° DB ì—°ê²° ì´ì–´ì„œ âœ…

- (ë‚´ì¼) ë„ì „ ê³¼ì œ 1: ì»¤ë®¤ë‹ˆí‹° DB ì—°ê²° ëë‚´ê¸°!

<br/>

### ğŸ’­ ì˜¤ëŠ˜ì˜ íšŒê³  (ì´ ê³µë¶€ ì‹œê°„ 9:08:00)
- ì„±ê³µì ì¸ ì : ì˜¤ëœë§Œì— ëª©í‘œ ì‹œê°„ì„ ì±„ì› ë”°!  <br/>
- ê°œì„ í•´ì•¼í•  ì : ì˜¤ëŠ˜ê¹Œì§€ DB ëë‚´ê³  ì‹¶ì—ˆëŠ”ë° ëª»í–ˆë‹¤! ë‚´ì¼ì€ ê¼­ ëë‚¼ ì˜ˆì •...!!!! <br/>

<br/>

### ğŸ“ ì°¸ê³  ìë£Œ ë° ë§í¬
- [ğŸŒ ì•…ëª… ë†’ì€ CORS ê°œë… & í•´ê²°ë²• - ì •ë¦¬ ëíŒì™• ğŸ‘](https://inpa.tistory.com/entry/WEB-%F0%9F%93%9A-CORS-%F0%9F%92%AF-%EC%A0%95%EB%A6%AC-%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95-%F0%9F%91%8F)
- [HTTP í—¤ë” - HTTP | MDN](https://developer.mozilla.org/ko/docs/Web/HTTP/Headers)