## ğŸ“… ë‚ ì§œ: 2025-01-06


### ğŸ’¬ í•™ìŠµ ëª©í‘œ

- í•™ìŠµ ëª©í‘œ 1 : ì»¤ë®¤ë‹ˆí‹° DB ì—°ê²° ì´ì–´ì„œ


### ğŸ“’ ì˜¤ëŠ˜ ê³µë¶€í•œ ë‚´ìš©
#### | ì»¤ë®¤ë‹ˆí‹° DB ì´ì–´ì„œ

- ì˜¤ë¥˜ ë‚´ìš©
    - íšŒì›ê°€ì… ì‹œ ì˜¤ë¥˜
    1. password ì»¬ëŸ¼ì˜ ê¸¸ì´ê°€ bcrypt ë¡œ ì•”í˜¸í™”í•œ ë¹„ë°€ë²ˆí˜¸ì˜ ê¸¸ì´ ë³´ë‹¤ ì‘ìŒ
        
        ```bash
        Error during signup: Error: Data too long for column 'password' at row 1
            at PromisePool.query (/Users/goorm/Desktop/workspace/2-siena-eom-community-be/node_modules/mysql2/lib/promise/pool.js:36:22)
            at Object.saveUser (file:///Users/goorm/Desktop/workspace/2-siena-eom-community-be/models/userModelusingDB.js:21:24)
            at signup (file:///Users/goorm/Desktop/workspace/2-siena-eom-community-be/controllers/userController.js:35:40) {
          code: 'ER_DATA_TOO_LONG',
          errno: 1406,
          sql: "INSERT INTO user (email, password, nickname, profile) VALUES ('aa@aa.com', '$2b$10$z2CpS6SXHPgkoNoWFzdZ4ul6gCMkZ7t8S1HsBuTvh9pfreX0cQkIi', 'siena', 'http://localhost:3001/images/default-profile.png')",
          sqlState: '22001',
          sqlMessage: "Data too long for column 'password' at row 1"
        }
        ```
        í˜„ì¬ password ì»¬ëŸ¼ì˜ ê¸¸ì´ëŠ” VARCHAR(50)ì´ê³  bcryptë¡œ ì•”í˜¸í™” í•œ ë¹„ë°€ë²ˆí˜¸ì˜ ê¸¸ì´ëŠ” 60ì..!!! 

    2. í•´ê²° ë°©ì•ˆ
        password ì»¬ëŸ¼ ì €ì¥ ê¸€ììˆ˜ ëŠ˜ë¦¬ê¸°

        ```sql
        ALTER TABLE user MODIFY password VARCHAR(100);
        ```
        
        ë¡œ ìˆ˜ì • í›„ í™•ì¸
        
        <img width="412" alt="%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202025-01-06%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%205 46 59" src="https://github.com/user-attachments/assets/acb77fdc-253c-43ba-9716-075433b21676" />

    - ê²Œì‹œê¸€ ì‘ì„± ì‹œ ì˜¤ë¥˜
    1. ë°ì´í„°ë² ì´ìŠ¤ê°€ í•œê¸€ì„ ì²˜ë¦¬í•˜ì§€ ëª»í•¨
        
        ```bash
        Error: Incorrect string value: '\xEA\xB2\x8C\xEC\x8B\x9C...' for column `community`.`post`.`title` at row 1
            at PromisePool.query (/Users/goorm/Desktop/workspace/2-siena-eom-community-be/node_modules/mysql2/lib/promise/pool.js:36:22)
            at Object.savePost (file:///Users/goorm/Desktop/workspace/2-siena-eom-community-be/models/postModelusingDB.js:21:24)
            at postWrite (file:///Users/goorm/Desktop/workspace/2-siena-eom-community-be/controllers/postController.js:50:40)
            at Layer.handle [as handle_request] (/Users/goorm/Desktop/workspace/2-siena-eom-community-be/node_modules/express/lib/router/layer.js:95:5)
            at next (/Users/goorm/Desktop/workspace/2-siena-eom-community-be/node_modules/express/lib/router/route.js:149:13)
            at requireAuth (file:///Users/goorm/Desktop/workspace/2-siena-eom-community-be/middleware/authMiddleware.js:9:5)
            at Layer.handle [as handle_request] (/Users/goorm/Desktop/workspace/2-siena-eom-community-be/node_modules/express/lib/router/layer.js:95:5)
            at next (/Users/goorm/Desktop/workspace/2-siena-eom-community-be/node_modules/express/lib/router/route.js:149:13)
            at Route.dispatch (/Users/goorm/Desktop/workspace/2-siena-eom-community-be/node_modules/express/lib/router/route.js:119:3)
            at Layer.handle [as handle_request] (/Users/goorm/Desktop/workspace/2-siena-eom-community-be/node_modules/express/lib/router/layer.js:95:5) {
          code: 'ER_TRUNCATED_WRONG_VALUE_FOR_FIELD',
          errno: 1366,
          sql: "INSERT INTO post (author, title, content, postImage, postDate, likCount, view, commentCount) VALUES (1, 'ê²Œì‹œê¸€ ì‘ì„±í•´ë³´ëŠ”ì¤‘ .. ë‘ë‘¥', 'DBì— ì˜ ì €ì¥ì´ ë˜ë ¤ë‚˜ìš”.. ê±±ì •ë§Œë•…', NULL, '2025-01-06 05:52:12', 0, 0, 0)",
          sqlState: '22007',
          sqlMessage: "Incorrect string value: '\\xEA\\xB2\\x8C\\xEC\\x8B\\x9C...' for column `community`.`post`.`title` at row 1"
        }
        ```
        
        mariaDBì˜ ê¸°ë³¸ë¬¸ì ì¸ì½”ë”©ì´ `latin1`ë¡œ ì„¤ì •ë˜ì–´ìˆì„ ê°€ëŠ¥ì„±ì´ í¬ëŒ€ì„œ í™•ì¸í–ˆë”ë‹ˆ ì§„ì§œ ê·¸ê±¸ë¡œ ë˜ì–´ìˆìŒ.. 
        í•œê¸€ ë°ì´í„° ì²˜ë¦¬ë¥¼ ìœ„í•´ì„œ `utf8mb4`ë¡œ ì„¤ì •í•´ì•¼í•œë‹¤ë„¤ìš©

        <img width="504" alt="%E1%84%89%E1%85%B3%E1%84%8F%E1%85%B3%E1%84%85%E1%85%B5%E1%86%AB%E1%84%89%E1%85%A3%E1%86%BA%202025-01-06%20%E1%84%8B%E1%85%A9%E1%84%92%E1%85%AE%205 57 52" src="https://github.com/user-attachments/assets/8101b2ba-a758-4102-b405-62ad96085fad" />

        db.js ì—ë„ ëª…ì‹œí•´ì£¼ê¸°

        ```jsx
        import mysql from 'mysql2/promise';
        import dotenv from 'dotenv';

        dotenv.config();

        // MariaDB ì—°ê²° ì„¤ì •
        const pool = mysql.createPool({
            host: process.env.DB_HOST,
            user: process.env.DB_USER,
            password: process.env.DB_PASSWORD,
            database: process.env.DB_NAME,
            port: process.env.DB_PORT,
            waitForConnections: true,
            connectionLimit: 10,
            queueLimit: 0,
            charset: 'utf8mb4', // í•œê¸€ ì²˜ë¦¬ë¥¼ ìœ„í•´..
        });

        export default pool;
        ```

ì´í›„ ì¢‹ì•„ìš” ê´€ë ¨ ì˜¤ë¥˜ í•´ê²° ë° ì½”ë“œ ìˆ˜ì •ì¤‘ ..



### ğŸ”¥ ë„ì „ ê³¼ì œ ë‹¬ì„± í™•ì¸, ë‚´ì¼ì˜ ë„ì „ê³¼ì œ ì„¤ì •
- (ì§€ë‚œ) ë„ì „ ê³¼ì œ 1: ì»¤ë®¤ë‹ˆí‹° DB ì—°ê²° ì´ì–´ì„œ âœ…

- (ë‚´ì¼) ë„ì „ ê³¼ì œ 1: ì»¤ë®¤ë‹ˆí‹° DB ì—°ê²° ì´ì–´ì„œ

<br/>

### ğŸ’­ ì˜¤ëŠ˜ì˜ íšŒê³  (ì´ ê³µë¶€ ì‹œê°„ 8:03:57)
```
ë°©í•™ì´ ëë‚¬ë‹¤! ì˜¤ëœë§Œì— ì¼ì° ì¼ì–´ë‚˜ì„œ ê³µë¶€í•˜ë ¤ë‹ˆ ì§‘ì¤‘ì´ ì˜ ì•ˆëë‹¤.. ğŸ¥¹
ë‹¤ì‹œ ê³µë¶€ ë£¨í‹´ì„ ìŒ“ì•„ì•¼ê² ë‹¤. ë„ˆë¬´ ëŠ¦ê²Œ ìì§€ë§ê³  ìˆ˜ì—…ì‹œê°„ì— ìµœëŒ€í•œ ì§‘ì¤‘í•˜ê¸°!
ë˜ ë§ˆê°ê¸°í•œ ì—†ì´ í•˜ë‹¤ë³´ë‹ˆ ì¢€ ì³ì§€ëŠ” ê²ƒ ê°™ì•„ì„œ ìˆ˜ìš”ì¼ê¹Œì§€ëŠ” DB ì—°ê²°ì„ ëë‚´ë³´ê¸°ë¡œ í–ˆë‹¤. 
ì•„ìì!
```

<br/>

### ğŸ“ ì°¸ê³  ìë£Œ ë° ë§í¬
- 